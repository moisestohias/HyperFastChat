{% extends "base.html" %}

{% block content %}
<div class="h-screen flex flex-col overflow-hidden bg-[#1d2021]">
    
    <!-- Top Header -->
    <header class="flex-shrink-0 border-b border-[#3c3836] bg-[#282828] px-4 py-2 flex justify-between items-center z-20">
        <div class="flex items-center gap-3">
            <a href="/" class="flex items-center justify-center w-8 h-8 border border-[#504945] hover:bg-[#3c3836] text-[#ebdbb2] transition-all">
                <span class="material-symbols-rounded text-xl">arrow_back</span>
            </a>
            <div>
                <h1 class="font-serif text-xl font-bold leading-none tracking-tight text-[#fe8019]">Conversations</h1>
                <p class="text-[8px] uppercase tracking-[0.2em] font-bold text-[#a89984] mt-0.5">Ref. {{ conversation_id[:8] if conversation_id else 'Session' }}</p>
            </div>
        </div>
        <div class="flex gap-3">
            <button class="flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-[#ebdbb2] hover:text-[#fe8019] transition-colors">
                <span class="material-symbols-rounded text-base">share</span>
                <span class="hidden md:inline">Share</span>
            </button>
            <button class="flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-[#ebdbb2] hover:text-[#fb4934] transition-colors">
                <span class="material-symbols-rounded text-base">delete</span>
                <span class="hidden md:inline">Clear</span>
            </button>
        </div>
    </header>

    <!-- Message Display Area -->
    <div id="chat-messages" class="flex-1 overflow-y-auto custom-scrollbar relative" _="on load or htmx:afterOnLoad
           set my.scrollTop to my.scrollHeight">
        
        <!-- Decorative Grid Background (Subtle Gruvbox style) -->
        <div class="absolute inset-0 opacity-[0.05] pointer-events-none" 
             style="background-image: radial-gradient(#ebdbb2 0.5px, transparent 0.5px); background-size: 32px 32px;"></div>

        <div class="max-w-4xl mx-auto w-full p-4 md:p-6 relative z-10">
            <div id="new-messages" class="space-y-1"
                _="on htmx:afterOnLoad wait 10ms then scrollIntoView({behavior:'smooth', block:'end'})">
                {% block chat_history %}{% endblock %}
            </div>
        </div>
    </div>

    <!-- Input Area -->
    <div class="flex-shrink-0 p-4 md:p-6 bg-transparent">
        <div class="max-w-4xl mx-auto">
            {% include "chat_input_field.html" %}
        </div>
    </div>
</div>
{% endblock %}

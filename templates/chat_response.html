<div class="flex flex-col gap-2 mb-4 {% if sender == 'user' %}items-end{% else %}items-start{% endif %}">
    <div
        class="max-w-[80%] {% if sender == 'user' %}bg-blue-600 text-white rounded-t-2xl rounded-bl-2xl{% else %}bg-gray-800 text-gray-100 rounded-t-2xl rounded-br-2xl{% endif %} p-4 shadow-md">
        {% if message %}
        <p class="text-sm leading-relaxed">{{ message }}</p>
        {% endif %}

        {% if files %}
        <div class="mt-3 flex flex-wrap gap-2">
            {% for file in files %}
            {% if file.type.startswith('image/') %}
            <img src="{{ file.url }}" class="max-h-48 rounded-lg border border-gray-700 shadow-sm" alt="Attached Image">
            {% else %}
            <div class="flex items-center gap-2 bg-black/20 p-2 rounded-lg text-xs">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <span>{{ file.name }}</span>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        {% endif %}
    </div>
    <span class="text-[10px] text-gray-500 px-1">{{ timestamp if timestamp else 'Just now' }}</span>
</div>
{% for model_id in models %}
<button
    class="w-full text-left px-4 py-2 text-sm {% if model_id == current_model %}text-blue-400 bg-zinc-700{% else %}text-gray-300 hover:bg-zinc-700 hover:text-white{% endif %} transition-colors flex items-center justify-between"
    role="menuitem" {% if conversation_id=="new" %} _="on click 
        set #selected-model-input.value to '{{ model_id }}'
        set localStorage.lastSelectedModel to '{{ model_id }}'
        put '{{ model_id }}' into #model-btn-span
        add .hidden to #model-menu
        take .text-blue-400 from .text-blue-400 in #model-menu
        take .bg-zinc-700 from .bg-zinc-700 in #model-menu
        add .text-blue-400 to me
        add .bg-zinc-700 to me" {% else %} hx-patch="/chat/{{ conversation_id }}/model" hx-ext="json-enc"
    hx-vals='{"model": "{{ model_id }}"}' hx-target="#model-dropdown-container" hx-swap="innerHTML" {% endif %}>
    {{ model_id }}
    {% if model_id == current_model %}
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
    </svg>
    {% endif %}
</button>
{% endfor %}